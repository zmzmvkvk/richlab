{"ast":null,"code":"import React,{useState,useContext}from\"react\";import axios from\"axios\";import styles from\"../css/Login.module.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[userid,setId]=useState(\"\");const[userpw,setPw]=useState(\"\");const handleLogin=async event=>{event.preventDefault();try{const response=await axios.post(\"/login\",{userid,userpw});console.log(\"Login response:\",response.data);// 로컬 스토리지에 토큰 저장\nlocalStorage.setItem(\"token\",response.data.token);axios.defaults.headers.common[\"Authorization\"]=\"Bearer \".concat(response.data.token);// 바로 토큰 유효성 검증\nverifyToken();}catch(error){console.error(\"Login error:\",error.response);}};const verifyToken=async()=>{try{const verifyResponse=await axios.get(\"/verify-token\");console.log(\"Token verification response:\",verifyResponse.data);// 추가적인 처리 (예: 상태 업데이트, 리디렉션 등)\n}catch(error){console.error(\"Token validation error\",error.response);localStorage.removeItem(\"token\");}};return/*#__PURE__*/_jsxs(\"div\",{className:styles.LoginWrap,children:[/*#__PURE__*/_jsx(\"h3\",{className:styles.LoginLogo,children:/*#__PURE__*/_jsx(\"img\",{src:\"\",alt:\"\"})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uC548\\uB155\\uD558\\uC138\\uC694.\",/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uC11C\\uBE44\\uC2A4 \\uC774\\uC6A9\\uC744 \\uC704\\uD574 \\uB85C\\uADF8\\uC778\\uC744 \\uD574\\uC8FC\\uC138\\uC694.\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,className:styles.LoginFormWrap,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.LoginEmailWrap,children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"ID\",id:\"loginEmail\",className:styles.LoginEmail,value:userid,onChange:e=>setId(e.target.value)})}),/*#__PURE__*/_jsx(\"div\",{className:styles.LoginPasswordWrap,children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"PASSWORD\",id:\"loginPassword\",className:styles.LoginPassword,value:userpw,onChange:e=>setPw(e.target.value)})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:styles.LoginSubmitButton,children:\"\\uB85C\\uADF8\\uC778\\uD558\\uAE30\"})]})]});};export default Login;","map":{"version":3,"names":["React","useState","useContext","axios","styles","jsx","_jsx","jsxs","_jsxs","Login","userid","setId","userpw","setPw","handleLogin","event","preventDefault","response","post","console","log","data","localStorage","setItem","token","defaults","headers","common","concat","verifyToken","error","verifyResponse","get","removeItem","className","LoginWrap","children","LoginLogo","src","alt","onSubmit","LoginFormWrap","LoginEmailWrap","type","placeholder","id","LoginEmail","value","onChange","e","target","LoginPasswordWrap","LoginPassword","LoginSubmitButton"],"sources":["/Users/tjwns3481/Desktop/workspace/autoSourcing/client/src/components/Login.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport styles from \"../css/Login.module.css\";\n\nconst Login = () => {\n  const [userid, setId] = useState(\"\");\n  const [userpw, setPw] = useState(\"\");\n\n  const handleLogin = async (event) => {\n    event.preventDefault();\n    try {\n      const response = await axios.post(\"/login\", {\n        userid,\n        userpw,\n      });\n      console.log(\"Login response:\", response.data);\n      // 로컬 스토리지에 토큰 저장\n      localStorage.setItem(\"token\", response.data.token);\n      axios.defaults.headers.common[\n        \"Authorization\"\n      ] = `Bearer ${response.data.token}`;\n\n      // 바로 토큰 유효성 검증\n      verifyToken();\n    } catch (error) {\n      console.error(\"Login error:\", error.response);\n    }\n  };\n\n  const verifyToken = async () => {\n    try {\n      const verifyResponse = await axios.get(\"/verify-token\");\n      console.log(\"Token verification response:\", verifyResponse.data);\n      // 추가적인 처리 (예: 상태 업데이트, 리디렉션 등)\n    } catch (error) {\n      console.error(\"Token validation error\", error.response);\n      localStorage.removeItem(\"token\");\n    }\n  };\n\n  return (\n    <div className={styles.LoginWrap}>\n      <h3 className={styles.LoginLogo}>\n        <img src=\"\" alt=\"\" />\n      </h3>\n      <p>\n        안녕하세요.\n        <br />\n      </p>\n      <span>서비스 이용을 위해 로그인을 해주세요.</span>\n\n      <form onSubmit={handleLogin} className={styles.LoginFormWrap}>\n        <div className={styles.LoginEmailWrap}>\n          <input\n            type=\"text\"\n            placeholder=\"ID\"\n            id=\"loginEmail\"\n            className={styles.LoginEmail}\n            value={userid}\n            onChange={(e) => setId(e.target.value)}\n          />\n        </div>\n\n        <div className={styles.LoginPasswordWrap}>\n          <input\n            type=\"password\"\n            placeholder=\"PASSWORD\"\n            id=\"loginPassword\"\n            className={styles.LoginPassword}\n            value={userpw}\n            onChange={(e) => setPw(e.target.value)}\n          />\n        </div>\n\n        <button type=\"submit\" className={styles.LoginSubmitButton}>\n          로그인하기\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}